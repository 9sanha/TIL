<h1>Today I Learned</h1>

----------

[TOC]

-------------------------

## 어제의 내가 오늘의 나에게

- [ ] 일요일이니까 좀 쉬고 그램에 있는 자바 스터디 파일 옮겨놔!
- [ ] 첫 스터디 발표니까 현재 한 자료에 안주하지 말고 업데이트 해!
- [ ] 추가 과제 낼 끝낼 수 있으면 꼭 끝내자!
- [ ] myBlog 발전시킬 수 있으면 좀만 더 해보자!

---------------------------------

## 오늘 상태

  - 

--------------------------------

## 배운 것

### CSRF ###

#### 공격방법 

사용자 의지와 무관하게 공격자의 의도대로 서버에 특정 요청을 하도록 함

![image-20210926163811500](C:\Users\9sanh\AppData\Roaming\Typora\typora-user-images\image-20210926163811500.png)

- 사용자가 게시글 작성 페이지 등의 페이지를 요청하고 서버는 요청받은 페이지를 사용자에게 보낸다.
-  공격자는 페이지 응답을 가로채서 변조된 페이지를 사용자에게 전달한다.
- 사용자는 변조된 페이지에 사용자가 게시하고 싶은 내용이나 정보를 담아서 서버에 요청한다 (하지만 공격자에게 요청하는 것 과 같음)
- 공격자는 사용자의 정보를 가로채거나 공격자가 게시하고 싶은 내용을 담아서 서버에 요청한다.

#### 방어

응답 페이지에 랜덤 토큰값 부여

![image-20210926165347185](C:\Users\9sanh\AppData\Roaming\Typora\typora-user-images\image-20210926165347185.png)

- 사용자에게 페이지를 요청받을 때, 요청받은 페이지를 넘겨주면서 랜덤 토큰값을 숨겨서 같이 보내준다.
- 사용자에게 POST 요청을 받을 때, 발행한 토큰과 사용자가 요청한 페이지의 토큰값을 비교한 후 정보를 저장한다.
- 저장 후 토큰을 삭제하고 요청 받을 때 마다 새로운 토큰을 발행한다.

#### 개선 후 공격받았을 때

![image-20210926171234028](C:\Users\9sanh\AppData\Roaming\Typora\typora-user-images\image-20210926171234028.png)

- 변조 된 페이지에는 서버에서 발행한 토큰값이 없으므로 토큰값을 비교하는 과정에서 유효성을 인정받지 못한다.



### DI

**의존 관계 주입(Dependency Injection)**

- 어떤 객체가 사용하는 객체(의존하는 객체)를 직접 만들어 사용하지 않고, 주입 받아 사용하는 방법
- 쉽게 이해하기

객체간 의존관계를 이해하기 위한 예시다.

![image-20210926195816469](C:\Users\9sanh\AppData\Roaming\Typora\typora-user-images\image-20210926195816469.png)

필름 카메라를 예시로 들어보면, 필름카메라는 필름 없이 제 역할을 하지 못하므로 **필름카메라는 필름에 의존**한다고 할 수 있다. 이 개념을 빌려서 객체간의 의존관계를 설명하자면, **카메라 와  필름 각각을 서로 다른 객체라고 할 수 있고,  카메라 객체는  필름 객체에 의존한다고 할 수 있다.**

필름 카메라는 내장형 1회용 필름카메라와 분리형 다회용 필름카메라로 나눌 수 있다. 

내장형 필름카메라는 필름과 카메라를 분리하면 제 역할을 하지 못하기 때문에(강하게 결합되어 있기 때문에) **강한 결합**이라고 할 수 있으며, 동시에 **유연하지 못한 구조**라고 할 수 있다.

교체형 필름 카메라는 필름과 카메라를 분리할 수 있기 때문에(약하게 결합되어 있기 때문에) **약한 결합**이라고 할 수 있으며, 동시에 **유연한 구조**라고 할 수 있다. 

이를 코드로 구현해보자!

``` java

public class Film {
    public void film(){
}
   
public class FilmCamera {
    //일회용 필름 카메라
    public void disposableFilmCamera(){
        //카메라 안에 필름이 내장되어 있어서 강한 결합입니다!
        Film film = new Film();
    }
    
    public void multiUesFilmCamera(Film film){
        //카메라에 필름을 넣어준 것이기 때문에 약한 결합입니다!
        //필름을 카메라에 주입시킨 것이기 때문에 의존성 주입!
        Film myfilm = film;
    }
}
    
```



### IoC



### Bean



### XSS 방어 (미완성, 구현 방법 찾는 중)

#### **[lucy-xss-servlet-filter](https://github.com/naver/lucy-xss-servlet-filter)**

1. ```java
   //build.gradle에 의존성 선언!
   implementation 'com.navercorp.lucy:lucy-xss:1.6.3'
   ```

   ![image-20210926182630550](C:\Users\9sanh\AppData\Roaming\Typora\typora-user-images\image-20210926182630550.png)

2. 부터는 구현하지 못했다... 설명이 maven으로 되어있어서 설명에 있는 파일 구조와 내 프로젝트의 gradle 파일구조가 다르다. 방법을 찾아 구현하면 이어서 작성하는걸로!

------------------------------------

## 뿌듯한 것 ##

  - 

-------------------------------------

## 아쉬운 것 ##

  - 

-----------------------------------------

## 내일의 나에게 ##

  - 